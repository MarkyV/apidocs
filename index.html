<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>apidocs by oanda</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>apidocs</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/oanda/apidocs" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/oanda/apidocs/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/oanda/apidocs/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>OANDA Open API</h1>

<p><strong>Disclaimer</strong>: API is currently in draft and is not open to public access.</p>

<h2>API Request URL</h2>

<pre><code>https://api.oanda.com
</code></pre>

<h2>Getting started</h2>

<h3>Step 1: Register your application</h3>

<ul>
<li>Go to developer.oanda.com and sign up for a developer acount.</li>
<li>Register your applications on developer.oanda.com. We will assign OAuth client_id and client_secret for each of your applications. </li>
</ul><h3>Step 2: Authenticate</h3>

<p>All requests beside rates require authentcation.  Authentication required requests require an OAuth <code>access_token</code> which can be obtained by following the <a href="#Authentication">authenication guide</a> below.</p>

<h3>Step 3: Start Making request</h3>

<div class="highlight"><pre><span class="nv">$curl</span> -X POST <span class="se">\</span>
    -H <span class="s2">"Authorization: Bearer some_access_token_mF_9.B5f-4.1JqM"</span>
    --data-urlencode <span class="s1">'instrument=EUR/USD'</span> <span class="se">\</span>
    --data-urlencode <span class="s1">'uints=1'</span> <span class="se">\</span>
    --data-urlencode <span class="s1">'direction=long'</span> <span class="se">\</span>
    http://api.oanda.com/accounts/6531071/trades

<span class="o">{</span>
    <span class="s2">"ids"</span> : <span class="o">[</span>177715575<span class="o">]</span>,
    <span class="s2">"instrument"</span> : <span class="s2">"EUR\/USD"</span>,
    <span class="s2">"units"</span> : 2,
    <span class="s2">"price"</span> : 1.30582,
    <span class="s2">"marginUsed"</span> : 0.1306,
    <span class="s2">"direction"</span> : <span class="s2">"short"</span>
<span class="o">}</span>
</pre></div>

<h2>Authentication</h2>

<p>OANDA's API uses the <a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-12">OAuth 2.0 protocol</a>. A successful authentication flow results in the application obtaining a user access token which can be used to make requests to OANDA's APIs.</p>

<h4>Obtaining an access token</h4>

<ol>
<li><p>Direct user to our authourization URL.  User will be asked to log in if they are not logged in. The user will be prompt if he/she would like to give you application access to their account.</p></li>
<li>
<p>The server will redirect the user in one of two ways that you choose:</p>

<ul>
<li>
<strong>Server-side flow</strong> (Authorization Code): Redirect the user to a URI of your choice. Take the provided code parameter and exchange it for an access_token by POSTing the code to our access_token url.</li>
<li>
<strong>Client-side flow</strong> (Implicit flow): Instead of handling a code, we include the access_token as a fragment (#) in the URL. This method allows applications without any server component to receive an access_token with ease.</li>
</ul>
</li>
</ol><h4>Server-side flow</h4>

<h5>Step 1: Direct user to OANDA for authorization</h5>

<p>Direct OANDA account holder to the following URL to obtain authorization from user:</p>

<pre><code>http://api.oanda.com/oauth/authorized?client_id=$APP_ID&amp;redirect_url=$APP_REDIRECT_URL&amp;scope=$LIST_OF_PERMISSIONS&amp;response_type=code
</code></pre>

<p><strong>Parameters</strong></p>

<ul>
<li>
<strong>client_id</strong>: <strong>required</strong> The Application ID as provided when registering the application with OANDA.</li>
<li>
<strong>redirect_url</strong>: <strong>required</strong> The URL to redirect to after the user finishes the authorization flow. The URL specified must be a URL of with the same Base Domain as specified in the application settings.</li>
<li>
<strong>scope</strong>: <strong>required</strong> A comma separated list of the permission being requested.</li>
<li>
<strong>response_type</strong>: <strong>required</strong> Specify <strong>code</strong> to request server-size flow.</li>
<li>
<strong>state</strong>: <strong>optional</strong> A unique string used to maintain application state between the request and callback. When OANDA redirects the user back to the application redirect_uri, this parameter's value will be included in the response. This parameter is used to protect against Cross-Site Request Forgery.</li>
</ul><h5>Step 2: Receive redirect from OANDA</h5>

<p>OANDA will provide you with authentication code by redirecting to your <code>redirect_url</code> specified in step 1.</p>

<pre><code>https://your-redirect-url?state=$UNIQUE_STR&amp;code=$AUTH_CODE
</code></pre>

<p><strong>Parameters</strong></p>

<ul>
<li>
<strong>code</strong>: The authorization code, that can be used to obtain an access token.</li>
<li>
<strong>state</strong>: The <em>optional</em> unique string that was originally specified.</li>
</ul><p>If your authorization request is denied by the user, then we will redirect the user to your <code>redirect_uri</code> with error parameters:</p>

<pre><code>http://your-redirect-uri?error=access_denied&amp;error_reason=user_denied&amp;error_description=The+user+denied+your+request&amp;state=$UNIQUE_STR
</code></pre>

<p><strong>Parameters</strong></p>

<ul>
<li>
<strong>error</strong>: access_denied</li>
<li>
<strong>error_reason</strong>: user_denied</li>
<li>
<strong>error_description</strong>: The user denied your request</li>
<li>
<strong>state</strong>: The <em>optional</em> unique string that was originally specified.</li>
</ul><h5>Step 3: Exchange authentication code for access_token</h5>

<pre><code>http://api.oanda.com/oauth/access_token?client_id=$APP_ID&amp;client_secret=$APP_SECRET&amp;code=$AUTH_CODE
</code></pre>

<p><strong>Parameters</strong></p>

<ul>
<li>
<strong>client_id</strong>: <em>required</em> The Application ID as provided when registering the application with OANDA.</li>
<li>
<strong>client_secret</strong>: <em>required</em> The application secret as provided when registering the application with OANDA.</li>
<li>
<strong>code</strong>: <em>required</em> The authorization code received in the previous message.</li>
</ul><p>If succeed, access_token will be provide in the following format:</p>

<pre><code>{
    "access_token": "Asf9e9f30u909u"
}
</code></pre>

<h4>Client-side flow</h4>

<h5>Step 1: Direct user to OANDA for authorization</h5>

<p>Follow same instruction as <a href="#step-1-direct-user-to-oanda-for-authorization">above</a> but set <code>response_type=token</code></p>

<h5>Step 2: Receive redirect from OANDA</h5>

<p>OANDA will provide you with access_token by redirecting to your <code>redirect_url</code> specified in step 1.</p>

<pre><code>https://your-redirect-url#state=$UNIQUE_STR&amp;access_token=$ACCESS_TOKEN
</code></pre>

<p>If your authorization request is denied by the user, then we will redirect the user to your <code>redirect_uri</code> with error parameters:</p>

<pre><code>http://your-redirect-uri?error=access_denied&amp;error_reason=user_denied&amp;error_description=The+user+denied+your+request&amp;state=$UNIQUE_STR
</code></pre>

<h5>Using access_token</h5>

<p><code>access_token</code> need to be provide in the HTTP <code>Authorization</code> header. For example:</p>

<pre><code>GET /accounts/1/trades HTTP/1.1
Accept: */*
Connection: close
User-Agent: OAuth gem v0.4.4
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer Asf9e9f30u909u
Host: api.oanda.com
</code></pre>

<h2>Scope (Permissions)</h2>

<ul>
<li>
<strong>read</strong>: Allows access to rates and account information</li>
<li>
<strong>trade</strong>: Allows access to open and close trades</li>
</ul><h2>Request and Response</h2>

<p>OAuth token to be part of the HTTP header in all requests</p>

<pre><code>GET /accounts/1/trades HTTP/1.1
Accept: */*
Connection: close
User-Agent: OAuth gem v0.4.4
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer mF_9.B5f-4.1JqM
Host: api.oanda.com
</code></pre>

<p>All requests require <code>Content-Type: application/x-www-form-urlencoded</code> unless specified otherwise.</p>

<p>All response will be in JSON format.</p>

<h2>Handling errors</h2>

<p>When an error occurs, the applicable HTTP response code is returned as well as an error message in the body in the following format:</p>

<div class="highlight"><pre><span class="o">{</span>
    <span class="s2">"errorCode"</span> : <span class="o">[</span>OANDA error code, may or may kot be the same as the HTTP status code<span class="o">]</span>,
    <span class="s2">"message"</span>   : <span class="o">[</span>a description of the error which occurred, intended <span class="k">for </span>developers<span class="o">]</span>,
    <span class="s2">"moreInfo"</span>  : <span class="o">[</span>a link to a web page describing the error and possible causes and solutions<span class="o">]</span>
<span class="o">}</span>
</pre></div>

<h2>Rate limiting</h2>

<h2>API Resources and Collections</h2>

<table>
<tr>
<th>Resource</th>
<th>URI</th>
<th>Methods</th>
<th>Description</th>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/users.md">user</a></td>
<td>/users/:username</td>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/users.md">POST</a></td>
<td>User registration, user profile</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/accounts.md">account</a></td>
<td>/accounts/:account_id</td>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/accounts.md">GET</a></td>
<td>Contains account information for a specific account</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/accounts.md">account collection</a></td>
<td>/accounts</td>
<td><a href="apidocs/blob/master/sections/accounts.md">GET</a></td>
<td>Contains list of accounts for a specific user</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/trades.md">trade</a></td>
<td>/accounts/:account_id/trades/:trade_id</td>
<td>GET, PUT, DELETE</td>
<td>Contains info of a specific trade.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/trades.md">trade collection</a></td>
<td>/accounts/:id/trades</td>
<td>GET, POST</td>
<td>Contain a list of trade for a specific account. Use POST to create new trades</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/orders.md">order</a></td>
<td>/accounts/:account_id/orders/:order_id</td>
<td>GET, PUT, DELETE</td>
<td>Contains info of a specific order. GET to retrieve info. PUT to change, DELETE to delete.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/orders.md">order collection</a></td>
<td>/accounts/:account_id/orders</td>
<td>GET, POST</td>
<td>Contain a list of trade for a specific account. Use POST to create new trades</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/positions.md">position collection</a></td>
<td>/accounts/:account_id/position</td>
<td>GET, DELETE</td>
<td>Contain a list of positions for a specific account. Use GET to retrieve. DELTE to delete existing position.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/transactions.md">transaction</a></td>
<td>/accounts/:account_id/transactions/:trans_id</td>
<td>GET</td>
<td>Contains info of a specific transaction.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/transactions.md">transaction collection</a></td>
<td>/accounts/:account_id/transaction</td>
<td>GET</td>
<td>Contains info of a list transactions.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/alerts.md">price alert</a></td>
<td>/accounts/:account_id/alerts/:alert_id</td>
<td>GET, DELETE</td>
<td>Contains info of a specific transaction.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/alerts.md">price alert collection</a></td>
<td>/accounts/:account_id/alerts</td>
<td>GET</td>
<td>Contains info of a list transactions.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/rates.md">rates</a></td>
<td></td>
<td></td>
<td>Market rates data.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/news.md">news</a></td>
<td>/news/:article_id</td>
<td>GET</td>
<td>Retrieves the body of a news item.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/news.md">news collection</a></td>
<td>/news</td>
<td>GET</td>
<td>Contains a list of news items.</td>
</tr>
<tr>
<td><a href="https://github.com/oanda/apidocs/blob/master/sections/notifications.md">notification collection</a></td>
<td>/users/:username/notifications</td>
<td>POST, DELETE</td>
<td>Contains a list of devices registered for notification for :username's accounts</td>
</tr>
</table>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/oanda">oanda</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>